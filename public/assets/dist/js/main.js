!function(e){"use strict";e(document).ready((function(){n.init()}));var n={init:function(){var t=e(".it-form");t.length&&t.each((function(){n.handleForm(e(this))}))},handleForm:function(t){t.on("submit",(function(t){t.preventDefault();var a=e(this),o=a.find(".it-form-response"),i=n.escapeEmail(a.find("#email").val()),r=n.escapeYesNo(a.find("#mesecna-podrska").val()),s=n.escapeNumber(a.find("#iznos").val()),c=n.escapeHTML(a.find("#komentar").val());if(i&&s&&c){var m={email:i,mesecna_podrska:r,iznos:s,komentar:c};e.ajax({url:"https://api.donacije.com/register",type:"POST",contentType:"application/json",data:JSON.stringify(m),success:function(e){o.empty().html("Donator je uspešno registrovan.")},error:function(e,n,t){var a=e.responseJSON?e.responseJSON.message:t;o.empty().html("Došlo je do greške: "+a)}})}else o.empty().html("Molimo popunite sva obavezna polja.")}))},escapeEmail:function(e){return e?(e=e.trim().toLowerCase(),/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/.test(e)?e:""):""},escapeNumber:function(e){return e?(e=parseFloat(e),isNaN(e)||e<=0?0:e.toFixed(2)):0},escapeYesNo:function(e){return"DA"===e||"NE"===e?e:"NE"},escapeHTML:function(e){var n=document.createElement("div");return e?(n.innerText=e,n.textContent=e,n.innerHTML):""}}}(jQuery);