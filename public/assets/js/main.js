!function(e){"use strict";e(document).ready((function(){a.init()}));var a={init:function(){var n=e(".it-form");n.length&&n.each((function(){var n=e(this);a.handleForm(n),a.initSchoolSelect(n)}))},handleForm:function(n){n.on("submit",(function(n){n.preventDefault();var t=e(this),i=t.find(".it-form-response");if("donatori"===t.attr("data-type")){var o=a.escapeEmail(t.find('[name="email"]').val()),l=a.escapeYesNo(t.find('[name="monthly_support"]').val()),c=a.escapeNumber(t.find('[name="amount"]').val());if(a.escapeHTML(t.find('[name="message"]').val()),!o||!c||!l)return void i.empty().html("Molimo popunite sva obavezna polja.");t.attr("data-type")}else if("delegati"===t.attr("data-type")){o=a.escapeEmail(t.find('[name="email"]').val());var s=a.escapeHTML(t.find('[name="full_name"]').val()),m=a.escapeSchoolType(t.find('[name="school_type"]').val()),r=a.escapeHTML(t.find('[name="city"]').val()),p=a.escapeHTML(t.find('[name="school_name"]').val()),u=a.escapeNumber(t.find('[name="suspended_number"]').val()),f=a.escapeNumber(t.find('[name="total_number"]').val());if(a.escapeHTML(t.find('[name="message"]').val()),!(o&&s&&m&&r&&p&&u&&f))return void i.empty().html("Molimo popunite sva obavezna polja.");t.attr("data-type")}else if("osteceni"===t.attr("data-type")){s=a.escapeHTML(t.find('[name="full_name"]').val()),r=a.escapeHTML(t.find('[name="city"]').val()),p=a.escapeHTML(t.find('[name="school_name"]').val());var d=a.escapeHTML(t.find('[name="bank_account"]').val());if(c=a.escapeNumber(t.find('[name="amount"]').val()),!(s&&r&&p&&d&&c))return void i.empty().html("Molimo popunite sva obavezna polja.");t.attr("data-type")}this.submit()}))},escapeEmail:function(e){return e?(e=e.trim().toLowerCase(),/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/.test(e)?e:""):""},escapeNumber:function(e){return e?(e=parseFloat(e),isNaN(e)||e<=0?0:e.toFixed(2)):0},escapeYesNo:function(e){return["DA","NE"].includes(e)?e:"NE"},escapeSchoolType:function(e){return["OŠ","SŠ","G"].includes(e)?e:""},escapeHTML:function(e){var a=document.createElement("div");return e?(a.innerText=e,a.textContent=e,a.innerHTML):""},initSchoolSelect:function(a){var n=a.find(".it-school-city"),t=a.find(".it-school-name");n.length&&t.length&&n.on("change",(function(){var a=e(this).val();t.val(""),t.find("optgroup").hide(),t.find('optgroup[label*="'+a+'"]').show()}))}}}(jQuery);
