!function(e){"use strict";e(document).ready((function(){a.init()}));var a={init:function(){var t=e(".it-form");t.length&&t.each((function(){var t=e(this);a.handleForm(t),a.initSchoolSelect(t)}))},handleForm:function(t){t.on("submit",(function(t){t.preventDefault();var n=e(this),i=n.find(".it-form-response");if("donatori"===n.attr("data-type")){var o=a.escapeEmail(n.find("#email").val()),l=a.escapeYesNo(n.find("#monthly-support").val()),c=a.escapeNumber(n.find("#amount").val());if(a.escapeHTML(n.find("#message").val()),!o||!c||!l)return void i.empty().html("Molimo popunite sva obavezna polja.");n.attr("data-type")}else if("delegati"===n.attr("data-type")){o=a.escapeEmail(n.find("#email").val()),a.escapeHTML(n.find("#phone").val());var s=a.escapeHTML(n.find("#full-name").val()),r=a.escapeSchoolType(n.find("#school-type").val()),p=a.escapeHTML(n.find("#city").val()),u=a.escapeHTML(n.find("#school-name").val()),f=a.escapeNumber(n.find("#suspended-number").val()),d=a.escapeNumber(n.find("#total-number").val());if(a.escapeHTML(n.find("#message").val()),!(o&&s&&r&&p&&u&&f&&d))return void i.empty().html("Molimo popunite sva obavezna polja.");n.attr("data-type")}else if("osteceni"===n.attr("data-type")){s=a.escapeHTML(n.find("#full-name").val()),p=a.escapeHTML(n.find("#city").val()),u=a.escapeHTML(n.find("#school-name").val());var v=a.escapeHTML(n.find("#bank-account").val());if(c=a.escapeNumber(n.find("#amount").val()),!(s&&p&&u&&v&&c))return void i.empty().html("Molimo popunite sva obavezna polja.");n.attr("data-type")}this.submit()}))},escapeEmail:function(e){return e?(e=e.trim().toLowerCase(),/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/.test(e)?e:""):""},escapeNumber:function(e){return e?(e=parseFloat(e),isNaN(e)||e<=0?0:e.toFixed(2)):0},escapeYesNo:function(e){return["DA","NE"].includes(e)?e:"NE"},escapeSchoolType:function(e){return["OŠ","SŠ","G"].includes(e)?e:""},escapeHTML:function(e){var a=document.createElement("div");return e?(a.innerText=e,a.textContent=e,a.innerHTML):""},initSchoolSelect:function(a){var t=a.find(".it-school-city"),n=a.find(".it-school-name"),i=a.find(".it-school-value");t.length&&n.length&&(t.on("change",(function(){var t=e(this).val();n.hide(),a.find('.it-school-name[data-city*="'+t+'"]').show(),i.val("")})),n.on("change",(function(){i.val(e(this).val())})))}}}(jQuery);
